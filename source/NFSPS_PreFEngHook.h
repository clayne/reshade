#pragma once
// NFS Pro Street - ReShade Pre FENg Hook
#include "nfsincludes/injector/injector.hpp"
#ifndef HAS_DAL
#define HAS_DAL
#endif
#ifndef NFS_MULTITHREAD
#define NFS_MULTITHREAD
#endif
#define FEMANAGER_RENDER_HOOKADDR1 0x004B076A
#define NFSUC_EXIT1 0x004B0774
#define NFSUC_EXIT2 0x4B081C
#define NFS_D3D9_DEVICE_ADDRESS *(int*)0x00AC6ED4
#define DRAW_FENG_BOOL_ADDR 0x00A52AD8 //#define DRAW_FENG_BOOL_ADDR 0x4B1BB9 // in actual code...

#define SIM_SETSTREAM_ADDR 0x004CF3F0
#define WCOLMGR_GETWORLDHEIGHT_ADDR 0x007AC4F0
#define PLAYER_LISTABLESET_ADDR 0x00ACE444
#define MAINSERVICE_HOOK_ADDR 0x006DB100
#define SAVEHOTPOS_ADDR 0x00AEB6A8
#define LOADHOTPOS_ADDR 0x00AEB6AC

#define CHANGEPLAYERVEHICLE_ADDR 0x00AEB6A0

#define EXITGAMEFLAG_ADDR 0x00ABAE68
#define GAMEFLOWMGR_ADDR 0x00ABB4F0
#define GAMEFLOWMGR_STATUS_ADDR 0xABB510
#define GAMEFLOWMGR_UNLOADFE_ADDR 0x006D3290
#define GAMEFLOWMGR_UNLOADTRACK_ADDR 0x006DBC60
#define GAMEFLOWMGR_LOADREGION_ADDR 0x006DBC10
#define SKIPFE_ADDR 0x00BFBC08
#define SKIPFETRACKNUM_ADDR 0x00A835D8
#define SKIPFETRACKNUM_ADDR2 0x00A9D974
#define DEFAULT_TRACK_NUM 6000
#define STARTSKIPFERACE_ADDR 0x0074EFA0

#define SKIPFE_NUMAICARS_ADDR 0x00BFBC18
#define SKIPFE_TRACKDIRECTION_ADDR 0x00BFBC14
#define SKIPFE_TRAFFICDENSITY_ADDR 0x00BFBC24
#define SKIPFE_TRAFFICONCOMING_ADDR 0x00A9D9B4
#define SKIPFE_DISABLETRAFFIC_ADDR 0x00BFBC21
//#define SKIPFE_DRAGRACE_ADDR 0x00864FC0
//#define SKIPFE_DRIFTRACE_ADDR 0x00864FC4
#define SKIPFE_P2P_ADDR 0x00BFBC22
#define SKIPFE_NUMPLAYERCARS_ADDR 0x00A9D9AC
#define SKIPFE_NUMLAPS_ADDR 0x00A9D9B0
#define SKIPFE_RACETYPE_ADDR 0x00BFBC23
#define SKIPFE_DIFFICULTY_ADDR 0x00A9D9B8

#define SKIPFE_PLAYERPERFORMANCE_ADDR 0x00A9D994
#define SKIPFE_NUMPLAYERSCREENS_ADDR 0x00A9D9E4
#define SKIPFE_RACEID_ADDR 0x00A9D978
#define SKIPFE_PLAYERCAR_ADDR 0x00A9D97C
#define SKIPFE_PLAYERCAR_DEHARDCODE_PATCH_ADDR 0x004D4B41
#define SKIPFE_PLAYERCAR2_ADDR 0x00A9D984
#define SKIPFE_PLAYERCAR3_ADDR 0x00A9D988
#define SKIPFE_PLAYERCAR4_ADDR 0x00A9D98C
//#define SKIPFE_OPPONENTPRESETRIDE_ADDR 0x008F86B0
#define SKIPFE_DISABLECOPS_ADDR 0x00A9D59A
#define SKIPFE_MAXCOPS_ADDR 0x00BFBC1C
#define SKIPFE_HELICOPTER_ADDR 0x00BFBC20

// New ProStreet stuff (other than 4 player support)
#define SKIPFE_TURBOSFX_ADDR 0x00A9D980
#define SKIPFE_FORCEHUBSELECTIONSET_ADDR 0x00A9D998
#define SKIPFE_FORCERACESELECTIONSET_ADDR 0x00A9D998
#define SKIPFE_FORCENIS_ADDR 0x00A9D9A0
#define SKIPFE_FORCENISCONTEXT_ADDR 0x00A9D9A4
#define SKIPFE_TRACTIONCONTROLLEVEL_ADDR 0x00A9D9CC
#define SKIPFE_STABILITYCONTROLLEVEL_ADDR 0x00A9D9D0
#define SKIPFE_ANTILOCKBRAKESLEVEL_ADDR 0x00A9D9D4
#define SKIPFE_DRIFTASSISTLEVEL_ADDR 0x00A9D9D8
#define SKIPFE_RACELINEASSISTLEVEL_ADDR 0x00A9D9DC
#define SKIPFE_BRAKINGASSISTLEVEL_ADDR 0x00A9D9E0
#define SKIPFE_TRANSMISSIONSETUP_ADDR 0x00A9D9E8
#define SKIPFE_ENABLEDEBUGACTIVITY_ADDR 0x00BFBC2C
#define SKIPFE_PRACTICEMODE_ADDR 0x00BFBC2F
#define SKIPFE_DISABLESMOKE_ADDR 0x00BFBC38
#define SKIPFE_SLOTCARRACE_ADDR 0x00BFBC3A
#define SKIPFE_BOOTFLOW_ADDR 0x00BFBC41

//#define AUGMENTEDDRIFT_ADDR 0x00BFBC39
#define SMARTLOOKAHEADCAMERA_ADDR 0x00BFBC39
//#define FORCEFAKEBOSS_ADDR 0x00A9E66C

#define DEFAULT_PLAYERCAR "350z_track"
#define DEFAULT_PLAYER2CAR "350z_track"
#define DEFAULT_PLAYER3CAR "350z_track"
#define DEFAULT_PLAYER4CAR "350z_track"

#define UNLOCKALLTHINGS_ADDR 0x00BFBC5B
#define SKIPCAREERINTRO_ADDR 0x00BFBC6C
//#define SKIPDDAYRACES_ADDR 0x00A9E6C2
#define SHOWALLCARSINFE_ADDR 0x00BFBC6E
#define CARGUYSCAMERA_ADDR 0x00BFBC6F

#define DOSCREENPRINTF_ADDR 0x00BFBC70

//#define DISABLECOPS_ADDR 0x00A83A50
#define CAMERADEBUGWATCHCAR_ADDR 0x00AB4961
#define MTOGGLECAR_ADDR 0x00AB499C
#define MTOGGLECARLIST_ADDR 0x00AB49A0
#define CAMERA_SETACTION_ADDR 0x006494B0

#define CARLIST_TYPE_AIRACER 3
#define CARLIST_TYPE_COP 4
#define CARLIST_TYPE_TRAFFIC 5

#define GETSIMABLE_OFFSET 0x4
#define UTL_ILIST_FIND_ADDR 0x004614B0

#define AI_RANDOMTURNS_ADDR 0x00AEE853

// car flip stuff
#define VEHICLE_LISTABLESET_ADDR 0x00ACE144
#define IRIGIDBODY_HANDLE_ADDR 0x00402280
#define RB_GETMATRIX4_OFFSET 0x40
#define RB_SETORIENTATION_OFFSET 0x70

// infinite NOS
#define INFINITENOS_CAVE_ADDR 0x00488D19

// AI Control toggle
#define AICONTROL_CAVE_ADDR 0x41D296
#define AICONTROL_CAVE_EXIT 0x0041D29C
#define UPDATEWRONGWAY_ADDR 0x0041CEC0

#define PRECULLERMODE_ADDR 0x00A9D9C8

#define FENG_MINSTANCE_ADDR 0x00AB27D8
#define FENG_QUEUEPACKAGEPOP_ADDR 0x0059F160
#define FENG_QUEUEPACKAGEPUSH_ADDR 0x005AC340
#define FENG_QUEUEPACKAGESWITCH_ADDR FENG_QUEUEPACKAGEPUSH_ADDR

#define GAMENOTIFYRACEFINISHED_ADDR 0x006E9D00
#define GAMEENTERPOSTRACEFLOW_ADDR 0x006E9EA0

//#define APPLYVISUALLOOK_ADDR 0x00A65394
//#define DRAWWORLD_ADDR 0x00A63E0C
#define DRAWWORLD_CAVE_ADDR 0x004BD56D
#define DRAWWORLD_CAVE_TRUE_EXIT 0x004BD57B
#define DRAWWORLD_CAVE_FALSE_EXIT 0x004BD732
#define DRAWCARS_ADDR 0x00A79CDC
#define DRAWCARSHADOWS_ADDR 0x00A79CE4
//#define GAMESPEED_ADDR 0x00A712AC
#define GAMESPEED_CAVE_ADDR 0x004D5245
#define GAMESPEED_CAVE_EXIT 0x4D5277

#define PUSHMOVIE_ADDR 0x005AC600
#define ISMOVIEPLAYING_ADDR 0x00AB27E0

// player cash & DAL stuff
#define FEMANAGER_INSTANCE_ADDR 0x00AB27D8
//#define USERPROFILE_POINTER (*(int*)(*(int*)((*(int*)FEMANAGER_INSTANCE_ADDR) + 0xD4)))
#define USERPROFILE_POINTER (*(int*)0x00AB0EAC)
#define FECAREER_POINTER (*(int*)0x00AB0EA8)
#define PLAYERCASH_POINTER (FECAREER_POINTER + 0x1E0)
#define CURRENTBIN_POINTER (FECAREER_POINTER + 0x1E4)
//#define PLAYERREP_POINTER (USERPROFILE_POINTER + 0x24334)
//#define CREWNAME_POINTER (USERPROFILE_POINTER + 0x24314)
//#define PROFILENAME_POINTER (USERPROFILE_POINTER + 0x10)
//#define CAR_FEPOSITION_POINTER (USERPROFILE_POINTER + 0x2946A)
//#define CAR_FEPOSITION_COUNT 10
// DAL options
#define MASTERVOL_POINTER (USERPROFILE_POINTER + 0x90954)
#define SPEECHVOL_POINTER (USERPROFILE_POINTER + 0x90958)
#define FEMUSICVOL_POINTER (USERPROFILE_POINTER + 0x9095C)
#define IGMUSICVOL_POINTER (USERPROFILE_POINTER + 0x90960)
#define SOUNDEFFECTSVOL_POINTER (USERPROFILE_POINTER + 0x90964)
#define ENGINEVOL_POINTER (USERPROFILE_POINTER + 0x90968)
#define CARVOL_POINTER (USERPROFILE_POINTER + 0x9096C)
#define AMBIENTVOL_POINTER (USERPROFILE_POINTER + 0x90970)
#define SPEEDVOL_POINTER (USERPROFILE_POINTER + 0x90974)

#define HIGHLIGHTCAM_POINTER (USERPROFILE_POINTER + 0x90938)
//#define JUMPCAM_POINTER (USERPROFILE_POINTER + 0x24219)
#define TIMEOFDAY_POINTER (USERPROFILE_POINTER + 0x908E0)
//#define DAMAGEON_POINTER (USERPROFILE_POINTER + 0x2420B)
//#define AUTOSAVEON_POINTER (USERPROFILE_POINTER + 0x24208)

#define FESCALE_POINTER (USERPROFILE_POINTER + 0x908DC)
#define WIDESCREEN_POINTER (USERPROFILE_POINTER + 0x90925)

//#define FEPOSITION_POINTER (USERPROFILE_POINTER + 0x24279)
//#define FELAPINFO_POINTER (USERPROFILE_POINTER + 0x2427A)
//#define FESCORE_POINTER (USERPROFILE_POINTER + 0x2427B)
//#define FELEADERBOARD_POINTER (USERPROFILE_POINTER + 0x2427D)
//#define FECREWINFO_POINTER (USERPROFILE_POINTER + 0x2427E)
//#define FETRANSMISSIONPROMPT_POINTER (USERPROFILE_POINTER + 0x2427F)
//#define FERVM_POINTER (USERPROFILE_POINTER + 0x24209)
//#define FEPIP_POINTER (USERPROFILE_POINTER + 0x2420A)
//#define SPEEDOUNIT_POINTER (USERPROFILE_POINTER + 0x2420C)

//#define DRIVEWITHANALOG_POINTER (USERPROFILE_POINTER + 0x24280)
//#define INPUT_SENSITIVITYSETTING_POINTER (USERPROFILE_POINTER + 0x24284)
//#define RUMBLEON_POINTER (USERPROFILE_POINTER + 0x2427C)
//#define PCPADIDX_POINTER (USERPROFILE_POINTER + 0x242D0)
//#define PCDEVTYPE_POINTER (USERPROFILE_POINTER + 0x242D4)

//#define BRIGHTNESS_POINTER (USERPROFILE_POINTER + 0x241F0)

#define GRACESTATUS_ADDR 0x00AB9D7C

void ReShade_EntryPoint();
void __stdcall MainService_Hook();
void ToggleAIControlCave();
void InfiniteNOSCave();
void DrawWorldCave();
void GameSpeedCave();
